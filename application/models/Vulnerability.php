<?php

/**
 * Vulnerability
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ##PACKAGE##
 * @subpackage ##SUBPACKAGE##
 * @author     ##NAME## <##EMAIL##>
 * @version    SVN: $Id: Builder.php 6401 2009-09-24 16:12:04Z guilhermeblanco $
 */
class Vulnerability extends BaseVulnerability
{
    /**
     * Override BaseVulnerability::setUp to include custom mutators
     *
     * @return void
     */
    public function setUp()
    {
        parent::setUp();

        $this->hasMutator('status', 'setStatus');
    }

    /**
     * Custom mutator to set the closedTs field when status changes to CLOSED
     *
     * @param string $value Value to set
     * @return void
     */
    public function setStatus($value)
    {
        if ($value == 'CLOSED') {
            $this->closedTs = Fisma::now();
        }

        // Update the value
        $this->_set('status', $value);
    }
}
