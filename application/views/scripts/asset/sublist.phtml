<?php Format_Section::startSection("Asset Inventory"); ?>
<script type="text/javascript" src="/javascripts/selectallselectnone.js"></script>
<script type="text/javascript">
    function deleteSelectedAssets() {
        document.forms.assetresult.submit();
    }
</script>
<form id="assetresult" method="post" action="/asset/delete">
<div class="toolbar">
    <?php
        echo new Yui_Form_Button_Link('pdf', 
                                      array('value' => 'Export PDF', 
                                            'href' => "$this->url/format/pdf",
                                            'imageSrc' => '/images/pdf.gif'));
        echo new Yui_Form_Button_Link('xls',
                                      array('value' => 'Export Excel', 
                                            'href' => "$this->url/format/xls", 
                                            'imageSrc' => '/images/xls.gif'));
        if($this->acl->isAllowed('asset','delete')) {
            $selectAllButton = new Yui_Form_Button('selectAll', 
                                                   array('value' => 'Select All', 
                                                         'onClickFunction' => 'selectAllUnsafe'));
            echo $selectAllButton;

            $selectNoneButton = new Yui_Form_Button('selectNone',
                                                    array('value' => 'Select None', 
                                                          'onClickFunction' => 'selectNoneUnsafe'));
            echo $selectNoneButton;

            $deleteButton = new Yui_Form_Button('deleteSelected',
                                                array('value' => 'Delete Selected', 
                                                      'onClickFunction' => 'deleteSelectedAssets'));
            echo $deleteButton;
        }
        if($this->acl->isAllowed('asset','create')) {
            echo new Yui_Form_Button_Link('createAsset', 
                                          array('value' => 'Create Asset', 
                                                'href' => '/asset/create'));
        }
    ?>
    <b>Page:&nbsp;</b><?php echo $this->links['all'];?>
</div>
<table width="98%" align="center" border="0" class="tbframe">
    <tr align="center">
        <th nowrap></th>
        <?php
            foreach ($this->columns as $key=>$column) {
                echo "<th>$column</th>";
                $keys[] = $key;
            }
        ?>
        <?php if($this->acl->isAllowed('asset','update')){
                 echo'<th nowrap>Edit</th>';
              }
              if($this->acl->isAllowed('asset','read')){
                 echo'<th nowrap>View</th>';
              }
        ?>
    </tr>
    <?php 
    if (is_array($this->asset_list)) {
    foreach($this->asset_list as $row){ ?>
    <tr>
        <?php if($this->acl->isAllowed('asset','delete')) { ?>
            <td align="center" class="tdc"><input type="checkbox" name="aid[]" 
                value="<?php echo $row['aid'];?>"></td>
        <?php } else { ?>
            <td align="center" class="tdc">&nbsp;</td>
        <?php }
            foreach ($keys as $v) {
                echo '<td class="tdc">&nbsp;'.$row[$v].'</td>';
            }
        ?>
        <?php if($this->acl->isAllowed('asset','update')) { ?>
        <td class="tdc" align="center"><a href="/panel/asset/sub/view/s/edit/id/<?php echo $row['aid'];?>"><img src="/images/edit.png" border="0"></a></td>
        <?php } if($this->acl->isAllowed('asset','read')) { ?>
        <td class="tdc" align="center"><a href="/panel/asset/sub/view/id/<?php echo $row['aid'];?>"><img src="/images/view.gif" border="0"></a></td>
        </tr>
        <?php } ?>
    <?php }
      } ?>
</table>
</form>
<?php Format_Section::stopSection(); ?>
