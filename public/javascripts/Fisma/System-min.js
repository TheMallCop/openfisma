Fisma.System={uploadDocumentCallback:function(a){window.location.href=window.location.href},removeSelectedUsers:function(b,a){var d=[];var c=new Object();$('input:checkbox[name="rolesAndUsers[][]"]:checked').each(function(){if($(this).val()!==""){d.push($(this).val())}});c.organizationId=a.organizationId;c.userRoles=d;c.csrf=$('[name="csrf"]').val();$.ajax({type:"POST",url:"/user/remove-user-roles/",data:c,dataType:"json",success:function(){$("#rolesAndUsers").load("/system/get-user-access-tree/id/"+c.organizationId+"/name/rolesAndUsers")}})},addUser:function(b,a){var c=new Object();c.userId=$("#addUserId").val();c.roleId=$("#roles").val();c.organizationId=a.organizationId;c.csrf=$('[name="csrf"]').val();$.ajax({type:"POST",url:"/system/add-user/",data:c,dataType:"json",success:function(){$("#rolesAndUsers").load("/system/get-user-access-tree/id/"+c.organizationId+"/name/rolesAndUsers")}})},addSelectedUsers:function(b,a){var d=[];var c=new Object();$('input:checkbox[name="copyUserAccessTree[][]"]:checked').each(function(){if($(this).val()!==""){d.push($(this).val())}});c.userRoles=d;c.organizationId=a.organizationId;c.csrf=$('[name="csrf"]').val();$.ajax({type:"POST",url:"/user/add-user-roles-to-organization/",data:c,dataType:"json",success:function(){$("#rolesAndUsers").load("/system/get-user-access-tree/id/"+c.organizationId+"/name/rolesAndUsers")}})},convertToOrganization:function(f,d){var c="WARNING: You are about to convert this system to an organization. After this conversion all system information (FIPS-199 and FISMA Data) will be permanently lost.\n\nDo you want to continue?";var h=function(){Fisma.System.showWaitPanelWhileConverting();this.hide();document.location="/system/convert-to-org/id/"+d.id};var b=function(){this.destroy()};var g=[{text:"Yes",handler:h},{text:"No",handler:b}];var e={width:"300px",fixedcenter:true,visible:false,draggable:false,close:true,modal:true,text:c,icon:YAHOO.widget.SimpleDialog.ICON_WARN,constraintoviewport:true,buttons:g};var a=new YAHOO.widget.SimpleDialog("warningDialog",e);a.setHeader("Are you sure?");a.render(document.body);a.show()},convertToSystem:function(e,c){var h=function(){Fisma.System.AskForOrgToSysInput(c.id);this.destroy()};var b=function(){this.destroy()};var g=[{text:"Yes",handler:h},{text:"No",handler:b}];var f="Are you sure you want to convert this organization to a system?";var d={width:"300px",fixedcenter:true,visible:false,draggable:false,close:true,modal:true,text:f,icon:YAHOO.widget.SimpleDialog.ICON_WARN,constraintoviewport:true,buttons:g};var a=new YAHOO.widget.SimpleDialog("warningDialog",d);a.setHeader("Are you sure?");a.render(document.body);a.show()},AskForOrgToSysInput:function(a){var e=Fisma.System.getSystemConversionForm(a);e.name="sysConversionForm";e.id="sysConversionForm";e.className="yui-pe-content";document.body.appendChild(e);var d=function(){Fisma.System.showWaitPanelWhileConverting();YAHOO.util.Dom.get("sysConversionForm").submit();this.hide()};var c=function(){this.destroy()};var f=[{text:"Submit",handler:d,isDefault:true},{text:"Cancel",handler:c}];var b=new YAHOO.widget.Dialog("sysConversionForm",{width:"300px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:f});YAHOO.util.Dom.removeClass("sysConversionForm","yui-pe-content");b.render();b.show()},getSystemConversionForm:function(a){var g=function(l,k,m){var o=document.createElement("tr");var n=document.createElement("td");var j=document.createTextNode(k);n.appendChild(j);var i=document.createElement("td");i.align="right";i.appendChild(c(k,m));o.appendChild(n);o.appendChild(i);l.appendChild(o)};var c=function(l,j){var o=document.createElement("select");o.name=l.replace(" ","");for(var i=0;i<j.length;i++){var m=document.createElement("option");m.value=j[i];var k=document.createTextNode(j[i]);var n=document.createElement("b");n.appendChild(k);m.appendChild(n);o.appendChild(m)}return o};var h=document.createElement("form");h.id="sysConversionForm";h.method="post";h.action="/organization/convert-to-system/id/"+a;var e=document.createElement("div");e.className="hd";e.appendChild(document.createTextNode("Please enter system information"));var b=document.createElement("div");b.className="bd";var f=document.createTextNode("Please input the needed system information in order to complete conversion");b.appendChild(f);b.appendChild(document.createElement("br"));b.appendChild(document.createElement("br"));var d=document.createElement("table");d.width="100%";g(d,"Type",["gss","major","minor"]);g(d,"SDLC Phase",["initiation","development","implementation","operations","disposal"]);g(d,"Confidentiality",["NA","HIGH","MODERATE","LOW"]);g(d,"Integrity",["HIGH","MODERATE","LOW"]);g(d,"Availability",["HIGH","MODERATE","LOW"]);b.appendChild(d);h.appendChild(e);h.appendChild(b);return h},showWaitPanelWhileConverting:function(){var a=new YAHOO.widget.Panel("savePanel",{width:"250px",fixedcenter:true,close:false,draggable:false,modal:true,visible:true});a.setHeader("Converting...");a.render(document.body);a.setBody('<img src="/images/loading_bar.gif">');a.show()}};