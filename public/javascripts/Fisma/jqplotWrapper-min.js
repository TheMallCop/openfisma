var CHART_CREATE_SUCCESS=1;var CHART_CREATE_FAILURE=2;var CHART_CREATE_EXTERNAL=3;var globalSettingsDefaults={fadingEnabled:false,barShadows:false,barShadowDepth:3,dropShadows:false,gridLines:false,pointLabels:false,pointLabelsOutline:false,showDataTable:false};var chartsOnDOM={};isIE=(window.ActiveXObject)?true:false;function createJQChart(e){var d={concatXLabel:false,nobackground:true,drawGridLines:false,pointLabelStyle:"color: black; font-size: 12pt; font-weight: bold",pointLabelAdjustX:-3,pointLabelAdjustY:-7,AxisLabelX:"",AxisLabelY:"",DataTextAngle:-30};e=jQuery.extend(true,d,e);if(document.getElementById(e.uniqueid)===false){throw"createJQChart Error - The target div/uniqueid does not exists"+e.uniqueid}setChartWidthAttribs(e);makeElementVisible(e.uniqueid+"loader");if(e.externalSource){document.getElementById(e.uniqueid).innerHTML="Loading chart data...";var c=e.externalSource;if(!e.oldExternalSource){e.oldExternalSource=e.externalSource}e.externalSource=undefined;e=buildExternalSourceParams(e);c+=String(e.externalSourceParams).replace(/ /g,"%20");e.lastURLpull=c;var f=new YAHOO.util.DataSource(c);f.responseType=YAHOO.util.DataSource.TYPE_JSON;f.responseSchema={resultsList:"chart"};var b={success:createJQChart_asynchReturn,failure:createJQChart_asynchReturn,argument:e};f.sendRequest("",b);return CHART_CREATE_EXTERNAL}document.getElementById(e.uniqueid).innerHTML="";document.getElementById(e.uniqueid).className="";document.getElementById(e.uniqueid+"toplegend").innerHTML="";if(typeof e.barMargin!="undefined"){e=jQuery.extend(true,e,{seriesDefaults:{rendererOptions:{barMargin:e.barMargin}}});e.barMargin=undefined}if(typeof e.legendLocation!="undefined"){e=jQuery.extend(true,e,{legend:{location:e.legendLocation}});e.legendLocation=undefined}if(typeof e.legendRowCount!="undefined"){e=jQuery.extend(true,e,{legend:{rendererOptions:{numberRows:e.legendRowCount}}});e.legendRowCount=undefined}e.chartData=forceIntegerArray(e.chartData);document.getElementById(e.uniqueid+"holder").style.display="";makeElementInvisible(e.uniqueid+"holder");document.getElementById(e.uniqueid+"loader").style.position="absolute";document.getElementById(e.uniqueid+"loader").finnishFadeCallback=new Function("fadeIn('"+e.uniqueid+"holder', 500);");fadeOut(e.uniqueid+"loader",500);setChartWidthAttribs(e);chartsOnDOM[e.uniqueid]=jQuery.extend(true,{},e);if(!chartIsEmpty(e)){var a;switch(e.chartType){case"stackedbar":e.varyBarColor=false;if(typeof e.showlegend=="undefined"){e.showlegend=true}a=createChartStackedBar(e);break;case"bar":if(typeof e.chartData[0]=="object"){e.varyBarColor=false;e.showlegend=true}else{e.chartData=[e.chartData];e.links=[e.links];e.varyBarColor=true;e.showlegend=false}e.stackSeries=false;a=createChartStackedBar(e);break;case"line":a=createChartStackedLine(e);break;case"stackedline":a=createChartStackedLine(e);break;case"pie":e.links=[e.links];a=createChartPie(e);break;default:throw"createJQChart Error - chartType is invalid ("+e.chartType+")";return CHART_CREATE_FAILURE}}removeOverlappingPointLabels(e);applyChartBackground(e);applyChartWidgets(e);createChartThreatLegend(e);applyChartBorders(e);globalSettingRefreshUi(e);showMsgOnEmptyChart(e);getTableFromChartData(e);return a}function createJQChart_asynchReturn(a,c,b){if(c){if(c.results[0]){b=mergeExtrnIntoParamObjectByInheritance(b,c)}else{throw"Error - Chart creation failed due to data source error at "+b.lastURLpull}if(typeof b.chartData=="undefined"){throw'Chart Error - The remote data source for chart "'+b.uniqueid+'" located at '+b.lastURLpull+" did not return data to plot on a chart"}return createJQChart(b)}else{throw"Error - Chart creation failed due to data source error at "+b.lastURLpull}return CHART_CREATE_FAILURE}function mergeExtrnIntoParamObjectByInheritance(c,b){var a={};if(b.results[0]["inheritCtl"]){if(b.results[0]["inheritCtl"]=="minimal"){a=b.results[0];a.width=c.width;a.height=c.height;a.uniqueid=c.uniqueid;a.externalSource=c.externalSource;a.oldExternalSource=c.oldExternalSource;a.widgets=c.widgets}else{if(b.results[0]["inheritCtl"]=="none"){a=b.results[0]}else{throw"Error - Unknown chart inheritance mode"}}}else{a=jQuery.extend(true,c,b.results[0],true)}return a}function createChartPie(e){usedLabelsPie=e.chartDataText;var d=[];for(var b=0;b<e.chartData.length;b++){e.chartDataText[b]+=" ("+e.chartData[b]+")";d[d.length]=[e.chartDataText[b],e.chartData[b]]}var a={title:e.title,seriesColors:e.colors,grid:{drawBorder:false,drawGridlines:false,shadow:false},axes:{xaxis:{tickOptions:{angle:e.DataTextAngle,fontSize:"10pt",formatString:"%.0f"}},yaxis:{tickOptions:{formatString:"%.0f"}}},seriesDefaults:{renderer:$.jqplot.PieRenderer,rendererOptions:{sliceMargin:0,showDataLabels:true,shadowAlpha:0.15,shadowOffset:0,lineLabels:true,lineLabelsLineColor:"#777",diameter:e.height*0.55}},legend:{location:"s",show:false,rendererOptions:{numberRows:1}}};a.seriesDefaults.renderer.prototype.startAngle=0;$("[id="+e.uniqueid+"]").css("height",e.height);a=jQuery.extend(true,a,e);plot1=$.jqplot(e.uniqueid,[d],a);var c=new Function("ev","seriesIndex","pointIndex","data","var thisChartParamObj = "+YAHOO.lang.JSON.stringify(e)+"; chartClickEvent(ev, seriesIndex, pointIndex, data, thisChartParamObj);");$("#"+e.uniqueid).bind("jqplotDataClick",c);return CHART_CREATE_SUCCESS}function createChartStackedBar(j){var e=[];var d=0;var g=0;var c=0;for(var h=0;h<j.chartDataText.length;h++){d=0;for(var f=0;f<j.chartData.length;f++){d+=j.chartData[f][h]}if(d>g){g=d}if(j.concatXLabel===true){j.chartDataText[h]+=" ("+d+")"}}var b=[];if(j.chartLayerText){for(h=0;h<j.chartLayerText.length;h++){b[h]={label:j.chartLayerText[h]}}}c=getNextNumberDivisibleBy5(g);yAxisTicks=[];yAxisTicks[0]=0;yAxisTicks[1]=(c/5)*1;yAxisTicks[2]=(c/5)*2;yAxisTicks[3]=(c/5)*3;yAxisTicks[4]=(c/5)*4;yAxisTicks[5]=(c/5)*5;$.jqplot.config.enablePlugins=true;var a={title:j.title,seriesColors:j.colors,stackSeries:true,series:b,seriesDefaults:{renderer:$.jqplot.BarRenderer,rendererOptions:{barWidth:35,showDataLabels:true,varyBarColor:j.varyBarColor,shadowAlpha:0.15,shadowOffset:0},pointLabels:{show:false,location:"s"}},axesDefaults:{tickRenderer:$.jqplot.CanvasAxisTickRenderer,borderWidth:0,labelOptions:{enableFontSupport:true,fontFamily:"arial, helvetica, clean, sans-serif",fontSize:"12pt",textColor:"#555555"}},axes:{xaxis:{label:j.AxisLabelX,labelRenderer:$.jqplot.CanvasAxisLabelRenderer,renderer:$.jqplot.CategoryAxisRenderer,ticks:j.chartDataText,tickOptions:{angle:j.DataTextAngle,fontFamily:"arial, helvetica, clean, sans-serif",fontSize:"10pt",textColor:"#555555"}},yaxis:{label:j.AxisLabelY,labelRenderer:$.jqplot.CanvasAxisLabelRenderer,min:0,max:c,autoscale:true,ticks:yAxisTicks,tickOptions:{formatString:"%.0f",fontFamily:"arial, helvetica, clean, sans-serif",fontSize:"10pt",textColor:"#555555"}}},highlighter:{show:false},grid:{gridLineWidth:0,shadow:false,borderWidth:1,gridLineColor:"#FFFFFF",background:"transparent",drawGridLines:j.drawGridLines,show:j.drawGridLines},legend:{show:j.showlegend,rendererOptions:{numberRows:1},location:"nw"}};if(isIE){a.grid.background="#FFFFFF"}$("[id="+j.uniqueid+"]").css("height",j.height);a=jQuery.extend(true,a,j);a=alterChartByGlobals(a);plot1=$.jqplot(j.uniqueid,j.chartData,a);var i=new Function("ev","seriesIndex","pointIndex","data","var thisChartParamObj = "+YAHOO.lang.JSON.stringify(j)+"; chartClickEvent(ev, seriesIndex, pointIndex, data, thisChartParamObj);");$("#"+j.uniqueid).bind("jqplotDataClick",i);removeDecFromPointLabels(j);return CHART_CREATE_SUCCESS}function createChartStackedLine(d){var b=[];var c=0;for(var a=0;a<d.chartDataText.length;a++){c=0;for(var e=0;e<["chartData"].length;e++){c+=["chartData"][e][a]}d.chartDataText[a]+=" ("+c+")"}plot1=$.jqplot(d.uniqueid,d.chartData,{title:d.title,seriesColors:["#F4FA58","#FAAC58","#FA5858"],series:[{label:"Open Findings",lineWidth:4,markerOptions:{style:"square"}},{label:"Closed Findings",lineWidth:4,markerOptions:{style:"square"}},{lineWidth:4,markerOptions:{style:"square"}}],seriesDefaults:{fill:false,showMarker:true,showLine:true},axes:{xaxis:{renderer:$.jqplot.CategoryAxisRenderer,ticks:d.chartDataText},yaxis:{min:0}},highlighter:{show:false},legend:{show:true,rendererOptions:{numberRows:1},location:"nw"}});return CHART_CREATE_SUCCESS}function createChartThreatLegend(i){if(i.showThreatLegend&&!chartIsEmpty(i)){if(i.showThreatLegend===true){var c="100%";if(i.threatLegendWidth){c=i.threatLegendWidth}var d=document.createElement("table");d.style.fontSize="12px";d.style.color="#555555";d.width=c;var b=document.createElement("tbody");var h=document.createElement("tr");var g=document.createElement("td");g.style.textAlign="center";g.style.fontWeight="bold";g.width="40%";var a=document.createTextNode("Threat Level");g.appendChild(a);h.appendChild(g);g=document.createElement("td");g.width="20%";g.appendChild(createThreatLegendSingleColor("FF0000","High"));h.appendChild(g);g=document.createElement("td");g.width="20%";g.appendChild(createThreatLegendSingleColor("FF6600","Moderate"));h.appendChild(g);g=document.createElement("td");g.width="20%";g.appendChild(createThreatLegendSingleColor("FFC000","Low"));h.appendChild(g);b.appendChild(h);d.appendChild(b);var f=i.uniqueid;var e=document.getElementById(f+"toplegend");e.appendChild(d)}}}function createThreatLegendSingleColor(b,c){var f=document.createElement("table");var e=document.createElement("tbody");var a=document.createElement("tr");var d=document.createElement("td");d.style.backgroundColor="#"+b;d.width="15px";a.appendChild(d);d=document.createElement("td");d.width="3px";a.appendChild(d);d=document.createElement("td");d.style.fontSize="12px";c=document.createTextNode("   "+c);d.appendChild(c);a.appendChild(d);e.appendChild(a);f.appendChild(e);return f}function chartClickEvent(d,a,c,e,b){var g=false;if(b.links){if(typeof b.links=="string"){g=b.links}else{if(b.links[a]){if(typeof b.links[a]=="object"){g=b.links[a][c]}else{g=b.links[a]}}}}g=unescape(g);if(g!==false){g=String(g).replace("#ColumnLabel#",b.chartDataText[c])}if(b.linksdebug===true){var f="You clicked on layer "+a+", in column "+c+", which has the data of "+e[1]+"\n";f+="The link information for this element should be stored as a string in chartParamData['links'], or as a string in chartParamData['links']["+a+"]["+c+"]\n";if(g!==false){f+="The link with this element is "+g}alert(f)}else{if(g!==false&&g!=="false"&&String(g)!=="null"){document.location=g}}}function forceIntegerArray(b){for(var a=0;a<b.length;a++){if(typeof b[a]=="object"){b[a]=forceIntegerArray(b[a])}else{b[a]=parseInt(b[a],10)}}return b}function applyChartBorders(g){if(typeof g.borders=="undefined"){if(g.chartType=="bar"||g.chartType=="stackedbar"){g.borders="BL"}else{return}}var i=document.getElementById(g.uniqueid);var d=i.childNodes;for(var a=d.length-1;a>0;a--){if(typeof d[a].nodeName!="undefined"){if(String(d[a].nodeName).toLowerCase()=="canvas"&&d[a].className=="jqplot-series-shadowCanvas"){var f=d[a];var c=f.getContext("2d");var e=d[a].height;var b=d[a].width;c.strokeStyle="#777777";c.lineWidth=3;c.beginPath();if(g.borders.indexOf("L")!=-1){c.moveTo(0,0);c.lineTo(0,e);c.stroke()}if(g.borders.indexOf("B")!=-1){c.moveTo(0,e);c.lineTo(b,e);c.stroke()}if(g.borders.indexOf("R")!=-1){c.moveTo(b,0);c.lineTo(b,e);c.stroke()}if(g.borders.indexOf("T")!=-1){c.moveTo(0,0);c.lineTo(b,0);c.stroke()}return}}}}function applyChartBackground(e){var g=document.getElementById(e.uniqueid);if(e.nobackground){if(e.nobackground===true){return}}if(e.background){if(e.background["nobackground"]){if(e.background["nobackground"]===true){return}}}var b="/images/logoShark.png";if(e.background){if(e.background["URL"]){b=e.background["URL"]}}var d='<img height="100%" src="'+b+'" style="opacity:0.15;filter:alpha(opacity=15);opacity:0.15" />';if(e.background){if(e.background["overrideHTML"]){b=e.background["overrideHTML"]}}if(e.chartType=="pie"){var a=g.childNodes[3];var h=g.childNodes[4]}else{var a=g.childNodes[6];var h=g.childNodes[5]}var f=a.style;injectedBackgroundImg=document.createElement("span");injectedBackgroundImg.setAttribute("align","center");injectedBackgroundImg.setAttribute("style","position: absolute; left: "+f.left+"; top: "+f.top+"; width: "+a.width+"px; height: "+a.height+"px;");var c=g.insertBefore(injectedBackgroundImg,h);c.innerHTML=d}function applyChartWidgets(d){var f=document.getElementById(d.uniqueid+"WidgetSpace");if(typeof d.widgets=="undefined"){f.innerHTML="<br/><i>There are no parameters for this chart.</i><br/><br/>";return}else{if(d.widgets.length===0){f.innerHTML="<br/><i>There are no parameters for this chart.</i><br/><br/>";return}}if(d.widgets){var b="";for(var a=0;a<d.widgets.length;a++){var c=d.widgets[a];if(!c.uniqueid){c.uniqueid=d.uniqueid+"_widget"+a;d.widgets[a]["uniqueid"]=c.uniqueid}b+="<tr><td nowrap align=left>"+c.label+' </td><td><td nowrap width="10"></td><td width="99%" align=left>';switch(c.type){case"combo":b+='<select id="'+c.uniqueid+'" onChange="widgetEvent('+YAHOO.lang.JSON.stringify(d).replace(/"/g,"'")+');">';for(var e=0;e<c.options.length;e++){b+='<option value="'+c.options[e]+'">'+c.options[e]+"</option><br/>"}b+="</select>";break;case"text":b+='<input onKeyDown="if(event.keyCode==13){widgetEvent('+YAHOO.lang.JSON.stringify(d).replace(/"/g,"'")+');};" type="textbox" id="'+c.uniqueid+'" />';break;default:throw"Error - Widget "+a+"'s type ("+c.type+") is not a known widget type"}b+="</td></tr>"}f.innerHTML="<table>"+b+"</table>"}applyChartWidgetSettings(d)}function applyChartWidgetSettings(e){if(e.widgets){for(var a=0;a<e.widgets.length;a++){var c=e.widgets[a];var d=document.getElementById(c.uniqueid);if(c.forcevalue){d.value=c.forcevalue;d.text=c.forcevalue}else{var b=getCookie(e.uniqueid+"_"+c.uniqueid);if(b!==""){b=b.replace(/%20/g," ");d.value=b;d.text=b}else{if(c.defaultvalue){d.value=c.defaultvalue;d.text=c.defaultvalue}}}}}}function buildExternalSourceParams(g){var c="";g.externalSourceParams="";if(g.widgets){for(var b=0;b<g.widgets.length;b++){var f=g.widgets[b];var a=f.uniqueid;var e=document.getElementById(a);if(e){c=e.value}else{var d=getCookie(g.uniqueid+"_"+f.uniqueid);if(d!==""){c=d}else{if(f.defaultvalue){c=f.defaultvalue}}}g.externalSourceParams+="/"+a+"/"+c}}return g}function widgetEvent(d){if(d.widgets){for(var c=0;c<d.widgets.length;c++){var b=d.widgets[c]["uniqueid"];var a=document.getElementById(b).value;setCookie(d.uniqueid+"_"+b,a,400)}}d=buildExternalSourceParams(d);d.externalSource=d.oldExternalSource;d.oldExternalSource=undefined;d.chartData=undefined;d.chartDataText=undefined;document.getElementById(d.uniqueid+"holder").finnishFadeCallback=new Function("makeElementVisible('"+d.uniqueid+"loader'); createJQChart("+YAHOO.lang.JSON.stringify(d)+"); this.finnishFadeCallback = '';");fadeOut(d.uniqueid+"holder",300)}function makeElementVisible(a){var b=document.getElementById(a);b.style.opacity="1";b.style.filter="alpha(opacity = '100')"}function makeElementInvisible(a){var b=document.getElementById(a);b.style.opacity="0";b.style.filter="alpha(opacity = '0')"}function fadeIn(a,d){var c=document.getElementById(a);if(c===null){return}var b=getGlobalSetting("fadingEnabled");if(b=="false"){makeElementVisible(a);if(c.finnishFadeCallback){c.finnishFadeCallback();c.finnishFadeCallback=undefined}return}if(typeof c.isFadingNow!="undefined"){if(c.isFadingNow===true){return}}c.isFadingNow=true;c.FadeState=null;c.FadeTimeLeft=undefined;makeElementInvisible(a);c.style.opacity="0";c.style.filter="alpha(opacity = '0')";fade(a,d)}function fadeOut(a,d){var c=document.getElementById(a);if(c===null){return}var b=getGlobalSetting("fadingEnabled");if(b=="false"){makeElementInvisible(a);if(c.finnishFadeCallback){c.finnishFadeCallback();c.finnishFadeCallback=undefined}return}if(typeof c.isFadingNow!="undefined"){if(c.isFadingNow===true){return}}c.isFadingNow=true;c.FadeState=null;c.FadeTimeLeft=undefined;makeElementVisible(a);c.style.opacity="1";c.style.filter="alpha(opacity = '100')";fade(a,d)}function fade(a,c){var b=document.getElementById(a);if(b===null){return}if(b.FadeState===null){if(b.style.opacity===null||b.style.opacity===""||b.style.opacity=="1"){b.FadeState=2}else{b.FadeState=-2}}if(b.FadeState==1||b.FadeState==-1){b.FadeState=b.FadeState==1?-1:1;b.FadeTimeLeft=c-b.FadeTimeLeft}else{b.FadeState=b.FadeState==2?-1:1;b.FadeTimeLeft=c;setTimeout("animateFade("+new Date().getTime()+",'"+a+"',"+c+")",33)}}function animateFade(d,a,f){var b=new Date().getTime();var g=b-d;var c=document.getElementById(a);if(c.FadeTimeLeft<=g){if(c.FadeState==1){c.style.filter="alpha(opacity = 100)";c.style.opacity="1"}else{c.style.filter="alpha(opacity = 0)";c.style.opacity="0"}c.isFadingNow=false;c.FadeState=c.FadeState==1?2:-2;if(c.finnishFadeCallback){c.finnishFadeCallback();c.finnishFadeCallback=""}return}c.FadeTimeLeft-=g;var e=c.FadeTimeLeft/f;if(c.FadeState==1){e=1-e}c.style.opacity=e;c.style.filter='alpha(opacity = "'+(e*100)+'")';setTimeout("animateFade("+b+",'"+a+"',"+f+")",33)}function setChartWidthAttribs(d){var b=false;if(d.chartData){if(d.chartType=="bar"||d.chartType=="stackedbar"){if(d.chartType=="stackedbar"){var c=d.chartData[0].length}else{if(d.chartType=="bar"){var c=d.chartData.length}}var a=(c*10)+(c*35)+40;if(d.width<a){b=true}}}if(typeof d.autoWidth!="undefined"){if(d.autoWidth===true){b=true}}if(b===true){document.getElementById(d.uniqueid+"loader").style.width="100%";document.getElementById(d.uniqueid+"holder").style.width="100%";document.getElementById(d.uniqueid+"holder").style.overflow="auto";document.getElementById(d.uniqueid).style.width=a+"px";document.getElementById(d.uniqueid+"toplegend").style.width=a+"px";if(d.align=="center"){document.getElementById(d.uniqueid).style.marginLeft="auto";document.getElementById(d.uniqueid).style.marginRight="auto";document.getElementById(d.uniqueid+"toplegend").style.marginLeft="auto";document.getElementById(d.uniqueid+"toplegend").style.marginRight="auto"}}else{document.getElementById(d.uniqueid+"loader").style.width="100%";document.getElementById(d.uniqueid+"holder").style.width=d.width+"px";document.getElementById(d.uniqueid+"holder").style.overflow="";document.getElementById(d.uniqueid).style.width=d.width+"px";document.getElementById(d.uniqueid+"toplegend").width=d.width+"px"}}function getTableFromChartData(b){if(chartIsEmpty(b)){return}var a=document.getElementById(b.uniqueid+"table");a.innerHTML="";if(getGlobalSetting("showDataTable")==="true"){if(b.chartType==="pie"){getTableFromChartPieChart(b)}else{getTableFromBarChart(b)}a.style.display="";document.getElementById(b.uniqueid).innerHTML="";document.getElementById(b.uniqueid).style.width=0;document.getElementById(b.uniqueid).style.height=0;document.getElementById(b.uniqueid+"toplegend").style.display="none"}else{a.style.display="none"}}function getTableFromChartPieChart(d){var f=document.createElement("table");var e=document.createElement("tbody");var g=document.createElement("tr");for(var b=0;b<d.chartDataText.length;b++){var a=document.createElement("th");var c=document.createTextNode(d.chartDataText[b]);a.setAttribute("style","font-style: bold;");a.appendChild(c);g.appendChild(a)}e.appendChild(g);g=document.createElement("tr");for(var b=0;b<d.chartData.length;b++){var a=document.createElement("td");var c=document.createTextNode(d.chartData[b]);a.appendChild(c);g.appendChild(a)}e.appendChild(g);f.appendChild(e);f.setAttribute("border","1");f.setAttribute("width","100%");document.getElementById(d.uniqueid+"table").appendChild(f)}function getTableFromBarChart(h){var a=document.createElement("table");var b=document.createElement("tbody");var g=document.createElement("tr");if(typeof h.chartLayerText!="undefined"){var f=document.createElement("td");var i=document.createTextNode(" ");f.appendChild(i);g.appendChild(f)}for(var e=0;e<h.chartDataText.length;e++){var f=document.createElement("th");var i=document.createTextNode(h.chartDataText[e]);f.setAttribute("style","font-style: bold;");f.appendChild(i);g.appendChild(f)}b.appendChild(g);for(var e=0;e<h.chartData.length;e++){var d=h.chartData[e];var g=document.createElement("tr");if(typeof h.chartLayerText!="undefined"){var f=document.createElement("th");var i=document.createTextNode(h.chartLayerText[e]);f.setAttribute("style","font-style: bold;");f.appendChild(i);g.appendChild(f)}if(typeof(d)=="object"){for(var c=0;c<d.length;c++){var f=document.createElement("td");var i=document.createTextNode(d[c]);f.setAttribute("style","font-style: bold;");f.appendChild(i);g.appendChild(f)}}else{var f=document.createElement("td");var i=document.createTextNode(d);f.appendChild(i);g.appendChild(f)}b.appendChild(g)}a.appendChild(b);a.setAttribute("border","1");a.setAttribute("width","100%");document.getElementById(h.uniqueid+"table").appendChild(a)}function removeDecFromPointLabels(g){var f="";var b=document.getElementById(g.uniqueid);for(var a=0;a<b.childNodes.length;a++){var e=b.childNodes[a];if(typeof e.classList=="undefined"){e.classList=String(e.className).split(" ")}if(e.classList){if(e.classList[0]=="jqplot-point-label"){thisLabelValue=parseInt(e.innerHTML,10);e.innerHTML=thisLabelValue;e.value=thisLabelValue;if(parseInt(e.innerHTML,10)===0){e.innerHTML=""}if(getGlobalSetting("pointLabelsOutline")=="true"){f="text-shadow: ";f+="#FFFFFF 0px -1px 0px, ";f+="#FFFFFF 0px 1px 0px, ";f+="#FFFFFF 1px 0px 0px, ";f+="#FFFFFF -1px 1px 0px, ";f+="#FFFFFF -1px -1px 0px, ";f+="#FFFFFF 1px 1px 0px; ";e.innerHTML='<span style="'+f+g.pointLabelStyle+'">'+e.innerHTML+"</span>";e.style.textShadow="text-shadow: #FFFFFF 0px -1px 0px, #FFFFFF 0px 1px 0px, #FFFFFF 1px 0px 0px, #FFFFFF -1px 1px 0px, #FFFFFF -1px -1px 0px, #FFFFFF 1px 1px 0px;"}else{e.innerHTML='<span style="'+g.pointLabelStyle+'">'+e.innerHTML+"</span>"}var d=parseInt(String(e.style.left).replace("px",""),10);var c=parseInt(String(e.style.top).replace("px",""),10);d+=g.pointLabelAdjustX;c+=g.pointLabelAdjustY;if(thisLabelValue>=100){d-=2}if(thisLabelValue>=1000){d-=3}e.style.left=d+"px";e.style.top=c+"px";e.style.color="black"}}}}function removeOverlappingPointLabels(q){if(q.chartType!="stackedbar"&&q.chartType!="stackedline"){return}var s=document.getElementById(q.uniqueid);var g={};var b=[];var k=0;var l=0;for(var o=0;o<s.childNodes.length;o++){var r=s.childNodes[o];if(typeof r.classList=="undefined"){r.classList=String(r.className).split(" ")}if(r.classList[0]=="jqplot-point-label"){var p=false;if(typeof r.isRemoved!="undefined"){p=r.isRemoved}if(p===false){var f=parseInt(String(r.style.left).replace("px",""),10);var j=parseInt(String(r.style.top).replace("px",""),10);k=r.value;var a="left_"+f;if(typeof g[a]=="undefined"){g[a]=[];b.push(a)}var e={left:f,top:j,value:k,obj:r};g[a].push(e)}}}for(var o=0;o<b.length;o++){var a=b[o];for(var n=0;n<g[a].length;n++){var i=g[a][n];for(var m=0;m<g[a].length;m++){var h=g[a][m];l=Math.abs(h.top-i.top);if(l<12&&l!==0){if(h.value<i.value){h.obj.innerHTML="";h.obj.isRemoved=true}else{i.obj.innerHTML="";h.obj.isRemoved=true}removeOverlappingPointLabels(q);return}}}}}function hideButtonClick(a,b,c){setChartSettingsVisibility(b,false)}function setChartSettingsVisibility(d,c){var a=d+"WidgetSpaceHolder";var b=document.getElementById(a);if(c=="toggle"){if(b.style.display=="none"){c=true}else{c=false}}if(c===true){b.style.display=""}else{b.style.display="none"}}function globalSettingUpdate(c){var b=document.getElementById(c+"GlobSettings");var e=b.childNodes;for(var a=0;a<e.length;a++){var d=e[a];if(d.nodeName=="INPUT"){if(d.type=="checkbox"){setGlobalSetting(d.id,d.checked)}else{setGlobalSetting(d.id,d.value)}}}redrawAllCharts()}function globalSettingRefreshUi(e){var b=document.getElementById(e.uniqueid+"GlobSettings");var d=b.childNodes;for(var a=0;a<d.length;a++){var c=d[a];if(c.nodeName=="INPUT"){if(c.type=="checkbox"){c.checked=(getGlobalSetting(c.id)=="true")?true:false}else{c.value=getGlobalSetting(c.id);c.text=c.value}}}}function showSetingMode(c){if(c===true){var d=document.getElementsByName("chartSettingsBasic");var b=document.getElementsByName("chartSettingsGlobal")}else{var b=document.getElementsByName("chartSettingsBasic");var d=document.getElementsByName("chartSettingsGlobal")}for(var a=0;a<b.length;a++){b[a].style.display="none"}for(var a=0;a<b.length;a++){d[a].style.display=""}}function getGlobalSetting(b){var a=getCookie("chartGlobSetting_"+b,"-RETURN-DEFAULT-SETTING-");if(a!="-RETURN-DEFAULT-SETTING-"){return a}else{if(typeof globalSettingsDefaults[b]=="undefined"){throw"You have referenced a global setting ("+b+"), but have not defined a default value for it! Please defined a def-value in the object called globalSettingsDefaults that is located within the global scope of jqplotWrapper.js"}else{return String(globalSettingsDefaults[b])}}}function setGlobalSetting(a,b){setCookie("chartGlobSetting_"+a,b)}function alterChartByGlobals(a){if(getGlobalSetting("barShadows")=="true"){a.seriesDefaults.rendererOptions.shadowDepth=3;a.seriesDefaults.rendererOptions.shadowOffset=3}if(getGlobalSetting("barShadowDepth")!="no-setting"&&getGlobalSetting("barShadows")=="true"){a.seriesDefaults.rendererOptions.shadowDepth=getGlobalSetting("barShadowDepth");a.seriesDefaults.rendererOptions.shadowOffset=getGlobalSetting("barShadowDepth")}if(getGlobalSetting("gridLines")=="true"){a.grid.gridLineWidth=1;a.grid.borderWidth=0;a.grid.gridLineColor=undefined;a.grid.drawGridLines=true;a.grid.show=true}if(getGlobalSetting("dropShadows")!="false"){a.grid.shadow=true}if(getGlobalSetting("pointLabels")=="true"){a.seriesDefaults.pointLabels.show=true}return a}function redrawAllCharts(){for(var b in chartsOnDOM){var a=chartsOnDOM[b];createJQChart(a);globalSettingRefreshUi(a)}}function showMsgOnEmptyChart(c){if(chartIsEmpty(c)){var d=document.getElementById(c.uniqueid);var e=d.childNodes[1];var b=document.createElement("div");b.height="100%";b.style.align="center";b.style.position="absolute";b.style.width=c.width+"px";b.style.height="100%";b.style.textAlign="center";b.style.verticalAlign="middle";var a=document.createTextNode("No data to plot.");b.appendChild(a);d.appendChild(b)}}function chartIsEmpty(b){var a=true;for(x in b.chartData){if(typeof b.chartData[x]=="object"){for(y in b.chartData[x]){if(parseInt(b.chartData[x][y],10)>0){a=false}}}else{if(parseInt(b.chartData[x],10)>0){a=false}}}return a}function getNextNumberDivisibleBy5(b){b=Math.round(b);for(var a=0;a<8;a++){var c=(b/5);if(c==Math.round(c)){return b}else{b++}}}function setCookie(b,c,a){var d=new Date();d.setDate(d.getDate()+a);document.cookie=b+"="+escape(c)+((a===null)?"":";expires="+d.toUTCString())}function getCookie(b,a){if(document.cookie.length>0){c_start=document.cookie.indexOf(b+"=");if(c_start!=-1){c_start=c_start+b.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}if(typeof a!="undefined"){return a}else{return""}};