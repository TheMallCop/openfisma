function setupEditFields(){var a=YAHOO.util.Selector.query(".editable");YAHOO.util.Event.on(a,"click",function(e){var i=this.getAttribute("target");YAHOO.util.Dom.removeClass(this,"editable");this.removeAttribute("target");if(i){var j=document.getElementById(i);var b=j.getAttribute("name");var k=j.getAttribute("type");var c=j.getAttribute("href");var g=j.className;var h=j.offsetWidth;var m=j.offsetHeight;var d=j.innerText?j.innerText:j.textContent;var n=j.innerHTML;if(k=="text"){j.outerHTML='<input length="50" name="'+b+'" id="'+i+'" class="'+g+'" type="text" />';textEl=document.getElementById(i);textEl.setAttribute("value",d.trim());if(h<200){h=200}textEl.style.width=(h-10)+"px";if(g=="date"){var j=document.getElementById(i);j.onfocus=function(){Fisma.Calendar.showCalendar(i,i+"_show")}}}else{if(k=="textarea"){var p=j.getAttribute("rows");var f=j.getAttribute("cols");j.outerHTML='<textarea id="'+b+'" rows="'+p+'" cols="'+f+'" name="'+b+'"></textarea>';var l=document.getElementById(b);l.value=n;l.style.width=h+"px";l.style.height=m+"px";tinyMCE.execCommand("mceAddControl",true,b)}else{if(k=="autocomplete"){this.parentNode.removeChild(this);Fisma.Editable.makeAutocomplete(j)}else{if(val=j.getAttribute("value")){d=val}YAHOO.util.Connect.asyncRequest("GET",c+"value/"+d.trim(),{success:function(q){if(k=="select"){j.outerHTML='<input type="button" id="'+b+'-button"/><select id="'+b+'-select" name="'+b+'">'+q.responseText+"</select>";YAHOO.util.Event.onContentReady(b+"-button",function(){var r=document.getElementById(b+"-select");var o=r.options[r.selectedIndex].innerHTML;var s=new YAHOO.widget.Button(b+"-button",{label:o,type:"menu",menu:b+"-select"});s.getMenu().subscribe("click",function(v,u){var t=u[0],w=u[1];if(w){s.set("label",w.cfg.getProperty("text"))}})})}},failure:function(q){alert("Failed to load the specified panel.")}},null)}}}}})}function validateEcd(){var e=document.getElementById("expectedCompletionDate");var c=e.value;var d=new Date();var a=d.getFullYear();var b=d.getMonth();b=b+1;if(b<10){b="0"+b}var f=d.getDate();if(f<10){f="0"+f}if(c.replace(/\-/g,"")<=parseInt(""+a+""+b+""+f)){alert("Warning: You entered an ECD date in the past.")}}if(window.HTMLElement){HTMLElement.prototype.__defineSetter__("outerHTML",function(b){var a=this.ownerDocument.createRange();a.setStartBefore(this);var c=a.createContextualFragment(b);this.parentNode.replaceChild(c,this);return b});HTMLElement.prototype.__defineGetter__("outerHTML",function(){var a;var b=this.attributes;var d="<"+this.tagName.toLowerCase();for(var c=0;c<b.length;c++){a=b[c];if(a.specified){d+=" "+a.name+'="'+a.value+'"'}}if(!this.canHaveChildren){return d+">"}return d+">"+this.innerHTML+"</"+this.tagName.toLowerCase()+">"});HTMLElement.prototype.__defineGetter__("canHaveChildren",function(){switch(this.tagName.toLowerCase()){case"area":case"base":case"basefont":case"col":case"frame":case"hr":case"img":case"br":case"input":case"isindex":case"link":case"meta":case"param":return false}return true})}(function(){var a=new Object();a.makeAutocomplete=function(c){var b=document.createElement("div");b.className="yui-ac";YAHOO.util.Dom.generateId(b);var g=document.createElement("input");g.type="hidden";g.name=c.getAttribute("name");g.value=c.getAttribute("value");YAHOO.util.Dom.generateId(g);b.appendChild(g);var d=document.createElement("input");d.type="text";d.name="autocomplete_"+c.id;d.value=c.getAttribute("defaultValue");YAHOO.util.Dom.generateId(d);b.appendChild(d);var e=document.createElement("div");YAHOO.util.Dom.generateId(e);b.appendChild(e);var f=document.createElement("img");f.src="/images/spinners/small.gif";f.className="spinner";f.id=e.id+"Spinner";b.appendChild(f);c.parentNode.replaceChild(b,c);YAHOO.util.Event.onDOMReady(Fisma.AutoComplete.init,{schema:[c.getAttribute("schemaObject"),c.getAttribute("schemaField")],xhr:c.getAttribute("xhr"),fieldId:d.id,containerId:e.id,hiddenFieldId:g.id,queryPrepend:c.getAttribute("queryPrepend"),setupCallback:c.getAttribute("setupCallback")})};Fisma.Editable=a})();